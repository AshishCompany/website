{{ define "main" }}
{{ $product := index $.Site.Data.products .Params.product}}
<section grid>
  <article column="8 +2">
    
    {{ partial "block/banner_img" . }}

    <h1>{{ .Title }} {{ if .IsPage }}{{ if .Draft }}<small>(draft)</small>{{ end }}{{ end }}</h1>

    {{ range (index $product "intro") }}
    <p>{{ . | markdownify }}</p>
    {{ end }}

    <div grid id="product" class="product card-box -center">
      {{ range (index $product "versions") }}
      <div column>
        <img src="{{ .icon.path }}" alt="{{ .icon.alt }}">

        <a href="{{ .link }}">
          <button class="-bordered -call-to-action {{ with .color }}{{ . }}{{ end }}">
            {{ .name }}
          </button>
        </a>
        
        {{ if isset . "icon"}}
          {{ $.Scratch.Set "list_icon" .list_icon }}
        {{ end }}
        {{ $list_icon := $.Scratch.Get "list_icon" }}

        {{ if isset . "features" }}
        <ul class="-unstyled">
          {{ range .features }}
          <li> 
            {{ if $list_icon }} <i class="fa fa-{{ $list_icon }}"></i> {{ end }}
            {{ . }}
          </li>
          {{ end }}
          {{ with .extra }} <li>{{ . }}</li> {{ end }}
        </ul>
        {{ end }}
      </div>
      {{ end }}
    </div>

    {{ .Content }}

    {{ with .Params.author }} {{ partial "modules/author" . }} {{ end }}
  </article>
</section>
{{ end }}
